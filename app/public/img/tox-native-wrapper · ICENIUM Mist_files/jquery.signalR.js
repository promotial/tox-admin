/*
 * ASP.NET SignalR JavaScript Library v1.1.2
 * http://signalr.net/
 *
 * Copyright Microsoft Open Technologies, Inc. All rights reserved.
 * Licensed under the Apache 2.0
 * https://github.com/SignalR/SignalR/blob/master/LICENSE.md
 *
 */
(function(a,n){if(typeof(a)!=="function"){throw new Error("SignalR: jQuery not found. Please ensure jQuery is referenced before the SignalR.js file.")}if(!n.JSON){throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.")}var l,b,c=(n.document.readyState==="complete"),d=a(n),h={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},k=function(q,o){if(o===false){return}var p;if(typeof(n.console)==="undefined"){return}p="["+new Date().toTimeString()+"] SignalR: "+q;if(n.console.debug){n.console.debug(p)}else{if(n.console.log){n.console.log(p)}}},f=function(o,p,q){if(p===o.state){o.state=q;a(o).triggerHandler(h.onStateChanged,[{oldState:p,newState:q}]);return true}return false},j=function(o){return o.state===l.connectionState.disconnected},g=function(o){var q,p;if(!o._.configuredStopReconnectingTimeout){p=function(r){r.log("Couldn't reconnect within the configured timeout ("+r.disconnectTimeout+"ms), disconnecting.");r.stop(false,false)};o.reconnecting(function(){var r=this;if(r.state===l.connectionState.reconnecting){q=n.setTimeout(function(){p(r)},r.disconnectTimeout)}});o.stateChanged(function(r){if(r.oldState===l.connectionState.reconnecting){n.clearTimeout(q)}});o._.configuredStopReconnectingTimeout=true}};l=function(q,p,o){return new l.fn.init(q,p,o)};l._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:(function(){var p,o;if(n.navigator.appName==="Microsoft Internet Explorer"){o=/MSIE ([0-9]+\.[0-9]+)/.exec(n.navigator.userAgent);if(o){p=n.parseFloat(o[1])}}return p})()};l.events=h;l.changeState=f;l.isDisconnecting=j;l.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4};l.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/hubs'></script>.")}};d.load(function(){c=true});function m(q,o){if(a.isArray(q)){for(var p=q.length-1;p>=0;p--){var r=q[p];if(a.type(q)!=="object"&&(a.type(r)!=="string"||!l.transports[r])){o.log("Invalid transport: "+r+", removing it from the transports list.");q.splice(p,1)}}if(q.length===0){o.log("No transports remain within the specified transport array.");q=null}}else{if(a.type(q)!=="object"&&!l.transports[q]&&q!=="auto"){o.log("Invalid transport: "+q.toString());q=null}else{if(q==="auto"&&l._.ieVersion<=8){return["longPolling"]}}}return q}function i(o){if(o==="http:"){return 80}else{if(o==="https:"){return 443}}}function e(o,p){if(p.match(/:\d+$/)){return p}else{return p+":"+i(o)}}l.fn=l.prototype={init:function(q,p,o){this.url=q;this.qs=p;this._={};if(typeof(o)==="boolean"){this.logging=o}},isCrossDomain:function(q,o){var p;q=a.trim(q);if(q.indexOf("http")!==0){return false}o=o||n.location;p=n.document.createElement("a");p.href=q;return p.protocol+e(p.protocol,p.host)!==o.protocol+e(o.protocol,o.host)},ajaxDataType:"json",contentType:"application/json; charset=UTF-8",logging:false,state:l.connectionState.disconnected,keepAliveData:{},reconnectDelay:2000,disconnectTimeout:30000,keepAliveWarnAt:2/3,start:function(t,o){var q=this,p={waitForPageLoad:true,transport:"auto",jsonp:false,withCredentials:true},s,r=q._deferral||a.Deferred(),u=n.document.createElement("a");if(a.type(t)==="function"){o=t}else{if(a.type(t)==="object"){a.extend(p,t);if(a.type(p.callback)==="function"){o=p.callback}}}p.transport=m(p.transport,q);if(!p.transport){throw new Error("SignalR: Invalid transport(s) specified, aborting start.")}q.withCredentials=p.withCredentials;if(!c&&p.waitForPageLoad===true){d.load(function(){q._deferral=r;q.start(t,o)});return r.promise()}g(q);if(f(q,l.connectionState.disconnected,l.connectionState.connecting)===false){r.resolve(q);return r.promise()}u.href=q.url;if(!u.protocol||u.protocol===":"){q.protocol=n.document.location.protocol;q.host=n.document.location.host;q.baseUrl=q.protocol+"//"+q.host}else{q.protocol=u.protocol;q.host=u.host;q.baseUrl=u.protocol+"//"+u.host}q.wsProtocol=q.protocol==="https:"?"wss://":"ws://";if(p.transport==="auto"&&p.jsonp===true){p.transport="longPolling"}if(this.isCrossDomain(q.url)){q.log("Auto detected cross domain url.");if(p.transport==="auto"){p.transport=["webSockets","longPolling"]}if(!p.jsonp){p.jsonp=!a.support.cors;if(p.jsonp){q.log("Using jsonp because this browser doesn't support CORS")}}q.contentType=l._.defaultContentType}q.ajaxDataType=p.jsonp?"jsonp":"json";a(q).bind(h.onStart,function(x,w){if(a.type(o)==="function"){o.call(q)}r.resolve(q)});s=function(z,w){w=w||0;if(w>=z.length){if(!q.transport){a(q).triggerHandler(h.onError,["SignalR: No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization."]);r.reject("SignalR: No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.");q.stop()}return}var y=z[w],x=a.type(y)==="object"?y:l.transports[y];if(y.indexOf("_")===0){s(z,w+1);return}x.start(q,function(){if(x.supportsKeepAlive&&q.keepAliveData.activated){l.transports._logic.monitorKeepAlive(q)}q.transport=x;f(q,l.connectionState.connecting,l.connectionState.connected);a(q).triggerHandler(h.onStart);d.unload(function(){q.stop(false)})},function(){s(z,w+1)})};var v=q.url+"/negotiate";v=l.transports._logic.addQs(v,q);q.log("Negotiating with '"+v+"'.");a.ajax({url:v,global:false,cache:false,type:"GET",contentType:q.contentType,xhrFields:{withCredentials:q.withCredentials},data:{},dataType:q.ajaxDataType,error:function(w){a(q).triggerHandler(h.onError,[w.responseText]);r.reject("SignalR: Error during negotiation request: "+w.responseText);q.stop()},success:function(x){var w=q.keepAliveData;q.appRelativeUrl=x.Url;q.id=x.ConnectionId;q.token=x.ConnectionToken;q.webSocketServerUrl=x.WebSocketServerUrl;q.disconnectTimeout=x.DisconnectTimeout*1000;if(x.KeepAliveTimeout){w.activated=true;w.timeout=x.KeepAliveTimeout*1000;w.timeoutWarning=w.timeout*q.keepAliveWarnAt;w.checkInterval=(w.timeout-w.timeoutWarning)/3}else{w.activated=false}if(!x.ProtocolVersion||x.ProtocolVersion!=="1.2"){a(q).triggerHandler(h.onError,["You are using a version of the client that isn't compatible with the server. Client version 1.2, server version "+x.ProtocolVersion+"."]);r.reject("You are using a version of the client that isn't compatible with the server. Client version 1.2, server version "+x.ProtocolVersion+".");return}a(q).triggerHandler(h.onStarting);var z=[],y=[];a.each(l.transports,function(A){if(A==="webSockets"&&!x.TryWebSockets){return true}y.push(A)});if(a.isArray(p.transport)){a.each(p.transport,function(){var A=this;if(a.type(A)==="object"||(a.type(A)==="string"&&a.inArray(""+A,y)>=0)){z.push(a.type(A)==="string"?""+A:A)}})}else{if(a.type(p.transport)==="object"||a.inArray(p.transport,y)>=0){z.push(p.transport)}else{z=y}}s(z)}});return r.promise()},starting:function(o){var p=this;a(p).bind(h.onStarting,function(r,q){o.call(p)});return p},send:function(p){var o=this;if(o.state===l.connectionState.disconnected){throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()")}if(o.state===l.connectionState.connecting){throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.")}o.transport.send(o,p);return o},received:function(o){var p=this;a(p).bind(h.onReceived,function(r,q){o.call(p,q)});return p},stateChanged:function(o){var p=this;a(p).bind(h.onStateChanged,function(r,q){o.call(p,q)});return p},error:function(o){var p=this;a(p).bind(h.onError,function(r,q){o.call(p,q)});return p},disconnected:function(o){var p=this;a(p).bind(h.onDisconnect,function(r,q){o.call(p)});return p},connectionSlow:function(o){var p=this;a(p).bind(h.onConnectionSlow,function(r,q){o.call(p)});return p},reconnecting:function(o){var p=this;a(p).bind(h.onReconnecting,function(r,q){o.call(p)});return p},reconnected:function(o){var p=this;a(p).bind(h.onReconnect,function(r,q){o.call(p)});return p},stop:function(o,q){var p=this;if(p.state===l.connectionState.disconnected){return}try{if(p.transport){if(q!==false){p.transport.abort(p,o)}if(p.transport.supportsKeepAlive&&p.keepAliveData.activated){l.transports._logic.stopMonitoringKeepAlive(p)}p.transport.stop(p);p.transport=null}a(p).triggerHandler(h.onDisconnect);delete p.messageId;delete p.groupsToken;delete p.id;delete p._deferral}finally{f(p,p.state,l.connectionState.disconnected)}return p},log:function(o){k(o,this.logging)}};l.fn.init.prototype=l.fn;l.noConflict=function(){if(a.connection===l){a.connection=b}return l};if(a.connection){b=a.connection}a.connection=a.signalR=l}(window.jQuery,window));(function(a,g){var f=a.signalR,d=a.signalR.events,b=a.signalR.changeState;f.transports={};function c(h){var j=h.keepAliveData,i,k;if(h.state===f.connectionState.connected){i=new Date();i.setTime(i-j.lastKeepAlive);k=i.getTime();if(k>=j.timeout){h.log("Keep alive timed out.  Notifying transport that connection has been lost.");h.transport.lostConnection(h)}else{if(k>=j.timeoutWarning){if(!j.userNotified){h.log("Keep alive has been missed, connection may be dead/slow.");a(h).triggerHandler(d.onConnectionSlow);j.userNotified=true}}else{j.userNotified=false}}}if(j.monitoring){g.setTimeout(function(){c(h)},j.checkInterval)}}function e(h){return h.state===f.connectionState.connected||h.state===f.connectionState.reconnecting}f.transports._logic={pingServer:function(i,k){var h=k==="webSockets"?"":i.baseUrl,l=h+i.appRelativeUrl+"/ping",j=a.Deferred();l=this.addQs(l,i);a.ajax({url:l,global:false,cache:false,type:"GET",contentType:i.contentType,xhrFields:{withCredentials:i.withCredentials},data:{},dataType:i.ajaxDataType,success:function(m){if(m.Response==="pong"){j.resolve()}else{j.reject("SignalR: Invalid ping response when pinging server: "+(m.responseText||m.statusText))}},error:function(m){j.reject("SignalR: Error pinging server: "+(m.responseText||m.statusText))}});return j.promise()},addQs:function(k,i){var h=k.indexOf("?")!==-1?"&":"?",j;if(!i.qs){return k}if(typeof(i.qs)==="object"){return k+h+a.param(i.qs)}if(typeof(i.qs)==="string"){j=i.qs.charAt(0);if(j==="?"||j==="&"){h=""}return k+h+i.qs}throw new Error("Connections query string property must be either a string or object.")},getUrl:function(i,m,l,j){var h=m==="webSockets"?"":i.baseUrl,n=h+i.appRelativeUrl,k="transport="+m+"&connectionToken="+g.encodeURIComponent(i.token);if(i.data){k+="&connectionData="+g.encodeURIComponent(i.data)}if(i.groupsToken){k+="&groupsToken="+g.encodeURIComponent(i.groupsToken)}if(!l){n+="/connect"}else{if(j){n+="/poll"}else{n+="/reconnect"}if(i.messageId){k+="&messageId="+g.encodeURIComponent(i.messageId)}}n+="?"+k;n=this.addQs(n,i);n+="&tid="+Math.floor(Math.random()*11);return n},maximizePersistentResponse:function(h){return{MessageId:h.C,Messages:h.M,Disconnect:typeof(h.D)!=="undefined"?true:false,TimedOut:typeof(h.T)!=="undefined"?true:false,LongPollDelay:h.L,GroupsToken:h.G}},updateGroups:function(h,i){if(i){h.groupsToken=i}},ajaxSend:function(h,i){var j=h.url+"/send?transport="+h.transport.name+"&connectionToken="+g.encodeURIComponent(h.token);j=this.addQs(j,h);return a.ajax({url:j,global:false,type:h.ajaxDataType==="jsonp"?"GET":"POST",contentType:f._.defaultContentType,dataType:h.ajaxDataType,xhrFields:{withCredentials:h.withCredentials},data:{data:i},success:function(k){if(k){a(h).triggerHandler(d.onReceived,[k])}},error:function(k,l){if(l==="abort"||l==="parsererror"){return}a(h).triggerHandler(d.onError,[k])}})},ajaxAbort:function(i,h){if(typeof(i.transport)==="undefined"){return}h=typeof h==="undefined"?true:h;var j=i.url+"/abort?transport="+i.transport.name+"&connectionToken="+g.encodeURIComponent(i.token);j=this.addQs(j,i);a.ajax({url:j,async:h,timeout:1000,global:false,type:"POST",contentType:i.contentType,dataType:i.ajaxDataType,xhrFields:{withCredentials:i.withCredentials},data:{}});i.log("Fired ajax abort async = "+h)},processMessages:function(i,k){var j;if(i.transport){var h=a(i);if(i.transport.supportsKeepAlive&&i.keepAliveData.activated){this.updateKeepAlive(i)}if(!k){return}j=this.maximizePersistentResponse(k);if(j.Disconnect){i.log("Disconnect command received from server");i.stop(false,false);return}this.updateGroups(i,j.GroupsToken);if(j.Messages){a.each(j.Messages,function(l,m){h.triggerHandler(d.onReceived,[m])})}if(j.MessageId){i.messageId=j.MessageId}}},monitorKeepAlive:function(h){var i=h.keepAliveData,j=this;if(!i.monitoring){i.monitoring=true;j.updateKeepAlive(h);h.keepAliveData.reconnectKeepAliveUpdate=function(){j.updateKeepAlive(h)};a(h).bind(d.onReconnect,h.keepAliveData.reconnectKeepAliveUpdate);h.log("Now monitoring keep alive with a warning timeout of "+i.timeoutWarning+" and a connection lost timeout of "+i.timeout);c(h)}else{h.log("Tried to monitor keep alive but it's already being monitored")}},stopMonitoringKeepAlive:function(h){var i=h.keepAliveData;if(i.monitoring){i.monitoring=false;a(h).unbind(d.onReconnect,h.keepAliveData.reconnectKeepAliveUpdate);h.keepAliveData={};h.log("Stopping the monitoring of the keep alive")}},updateKeepAlive:function(h){h.keepAliveData.lastKeepAlive=new Date()},ensureReconnectingState:function(h){if(b(h,f.connectionState.connected,f.connectionState.reconnecting)===true){a(h).triggerHandler(d.onReconnecting)}return h.state===f.connectionState.reconnecting},clearReconnectTimeout:function(h){if(h&&h._.reconnectTimeout){g.clearTimeout(h._.reconnectTimeout);delete h._.reconnectTimeout}},reconnect:function(h,k){var j=f.transports[k],i=this;if(e(h)&&!h._.reconnectTimeout){h._.reconnectTimeout=g.setTimeout(function(){j.stop(h);if(i.ensureReconnectingState(h)){h.log(k+" reconnecting");j.start(h)}},h.reconnectDelay)}},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window));(function(a,f){var d=a.signalR,c=a.signalR.events,b=a.signalR.changeState,e=d.transports._logic;d.transports.webSockets={name:"webSockets",supportsKeepAlive:true,send:function(g,h){g.socket.send(h)},start:function(h,j,i){var n,k=false,m=this,l=!j,g=a(h);if(!f.WebSocket){i();return}if(!h.socket){if(h.webSocketServerUrl){n=h.webSocketServerUrl}else{n=h.wsProtocol+h.host}n+=e.getUrl(h,this.name,l);h.log("Connecting to websocket endpoint '"+n+"'");h.socket=new f.WebSocket(n);h.socket.onopen=function(){k=true;h.log("Websocket opened");e.clearReconnectTimeout(h);if(j){j()}else{if(b(h,d.connectionState.reconnecting,d.connectionState.connected)===true){g.triggerHandler(c.onReconnect)}}};h.socket.onclose=function(o){if(this===h.socket){if(!k){if(i){i()}else{if(l){m.reconnect(h)}}return}else{if(typeof o.wasClean!=="undefined"&&o.wasClean===false){a(h).triggerHandler(c.onError,[o.reason]);h.log("Unclean disconnect from websocket."+o.reason)}else{h.log("Websocket closed")}}m.reconnect(h)}};h.socket.onmessage=function(q){var p=f.JSON.parse(q.data),o=a(h);if(p){if(a.isEmptyObject(p)||p.M){e.processMessages(h,p)}else{o.triggerHandler(c.onReceived,[p])}}}}},reconnect:function(g){e.reconnect(g,this.name)},lostConnection:function(g){this.reconnect(g)},stop:function(g){e.clearReconnectTimeout(g);if(g.socket!==null){g.log("Closing the Websocket");g.socket.close();g.socket=null}},abort:function(g){}}}(window.jQuery,window));(function(a,f){var d=a.signalR,c=a.signalR.events,b=a.signalR.changeState,e=d.transports._logic;d.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:true,timeOut:3000,start:function(h,l,k){var o=this,m=false,g=a(h),n=!l,p,i;if(h.eventSource){h.log("The connection already has an event source. Stopping it.");h.stop()}if(!f.EventSource){if(k){h.log("This browser doesn't support SSE.");k()}return}p=e.getUrl(h,this.name,n);try{h.log("Attempting to connect to SSE endpoint '"+p+"'");h.eventSource=new f.EventSource(p)}catch(j){h.log("EventSource failed trying to connect with error "+j.Message);if(k){k()}else{g.triggerHandler(c.onError,[j]);if(n){o.reconnect(h)}}return}i=f.setTimeout(function(){if(m===false){h.log("EventSource timed out trying to connect");h.log("EventSource readyState: "+h.eventSource.readyState);if(!n){o.stop(h)}if(n){if(h.eventSource.readyState!==f.EventSource.CONNECTING&&h.eventSource.readyState!==f.EventSource.OPEN){o.reconnect(h)}}else{if(k){k()}}}},o.timeOut);h.eventSource.addEventListener("open",function(q){h.log("EventSource connected");if(i){f.clearTimeout(i)}e.clearReconnectTimeout(h);if(m===false){m=true;if(l){l()}else{if(b(h,d.connectionState.reconnecting,d.connectionState.connected)===true){g.triggerHandler(c.onReconnect)}}}},false);h.eventSource.addEventListener("message",function(q){if(q.data==="initialized"){return}e.processMessages(h,f.JSON.parse(q.data))},false);h.eventSource.addEventListener("error",function(q){if(this===h.eventSource){if(!m){if(k){k()}return}h.log("EventSource readyState: "+h.eventSource.readyState);if(q.eventPhase===f.EventSource.CLOSED){h.log("EventSource reconnecting due to the server connection ending");o.reconnect(h)}else{h.log("EventSource error");g.triggerHandler(c.onError)}}},false)},reconnect:function(g){e.reconnect(g,this.name)},lostConnection:function(g){this.reconnect(g)},send:function(g,h){e.ajaxSend(g,h)},stop:function(g){e.clearReconnectTimeout(g);if(g&&g.eventSource){g.log("EventSource calling close()");g.eventSource.close();g.eventSource=null;delete g.eventSource}},abort:function(h,g){e.ajaxAbort(h,g)}}}(window.jQuery,window));(function(a,g){var e=a.signalR,c=a.signalR.events,b=a.signalR.changeState,f=e.transports._logic,d=(function(){var j=null,i=1000,h=0;return{prevent:function(){if(e._.ieVersion<=8){if(h===0){j=g.setInterval(function(){var k=a("<iframe style='position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;' src=''></iframe>");a("body").append(k);k.remove();k=null},i)}h++}},cancel:function(){if(h===1){g.clearInterval(j)}if(h>0){h--}}}})();e.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:true,timeOut:3000,start:function(h,l,k){var m=this,j=(f.foreverFrame.count+=1),n,i=a("<iframe data-signalr-connection-id='"+h.id+"' style='position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;' src=''></iframe>");if(g.EventSource){if(k){h.log("This browser supports SSE, skipping Forever Frame.");k()}return}d.prevent();n=f.getUrl(h,this.name);n+="&frameId="+j;a("body").append(i);i.prop("src",n);f.foreverFrame.connections[j]=h;h.log("Binding to iframe's readystatechange event.");i.bind("readystatechange",function(){if(a.inArray(this.readyState,["loaded","complete"])>=0){h.log("Forever frame iframe readyState changed to "+this.readyState+", reconnecting");m.reconnect(h)}});h.frame=i[0];h.frameId=j;if(l){h.onSuccess=l}g.setTimeout(function(){if(h.onSuccess){h.log("Failed to connect using forever frame source, it timed out after "+m.timeOut+"ms.");m.stop(h);if(k){k()}}},m.timeOut)},reconnect:function(h){var i=this;g.setTimeout(function(){if(h.frame&&f.ensureReconnectingState(h)){var j=h.frame,k=f.getUrl(h,i.name,true)+"&frameId="+h.frameId;h.log("Updating iframe src to '"+k+"'.");j.src=k}},h.reconnectDelay)},lostConnection:function(h){this.reconnect(h)},send:function(h,i){f.ajaxSend(h,i)},receive:function(h,j){var i;f.processMessages(h,j);h.frameMessageCount=(h.frameMessageCount||0)+1;if(h.frameMessageCount>50){h.frameMessageCount=0;i=h.frame.contentWindow||h.frame.contentDocument;if(i&&i.document){a("body",i.document).empty()}}},stop:function(h){var i=null;d.cancel();if(h.frame){if(h.frame.stop){h.frame.stop()}else{try{i=h.frame.contentWindow||h.frame.contentDocument;if(i.document&&i.document.execCommand){i.document.execCommand("Stop")}}catch(j){h.log("SignalR: Error occured when stopping foreverFrame transport. Message = "+j.message)}}a(h.frame).remove();delete f.foreverFrame.connections[h.frameId];h.frame=null;h.frameId=null;delete h.frame;delete h.frameId;h.log("Stopping forever frame")}},abort:function(i,h){f.ajaxAbort(i,h)},getConnection:function(h){return f.foreverFrame.connections[h]},started:function(h){if(h.onSuccess){h.onSuccess();h.onSuccess=null;delete h.onSuccess}else{if(b(h,e.connectionState.reconnecting,e.connectionState.connected)===true){a(h).triggerHandler(c.onReconnect)}}}}}(window.jQuery,window));(function(a,g){var e=a.signalR,c=a.signalR.events,b=a.signalR.changeState,d=a.signalR.isDisconnecting,f=e.transports._logic;e.transports.longPolling={name:"longPolling",supportsKeepAlive:false,reconnectDelay:3000,init:function(h,i){var l=this,k,j=function(m){if(d(h)===false){h.log("SignalR: Server ping failed because '"+m+"', re-trying ping.");g.setTimeout(k,l.reconnectDelay)}};h.log("SignalR: Initializing long polling connection with server.");k=function(){f.pingServer(h,l.name).done(i).fail(j)};k()},start:function(h,n,m){var q=this,k=false,i=function(){if(k){return}k=true;n();h.log("Longpolling connected")},o=0,p=null,j=function(r){g.clearTimeout(p);p=null;if(b(h,e.connectionState.reconnecting,e.connectionState.connected)===true){h.log("Raising the reconnect event");a(r).triggerHandler(c.onReconnect)}},l=3600000;if(h.pollXhr){h.log("Polling xhr requests already exists, aborting.");h.stop()}q.init(h,function(){h.messageId=null;g.setTimeout(function(){(function r(t,w){var u=t.messageId,s=(u===null),x=!s,v=!w,y=f.getUrl(t,q.name,x,v);if(d(t)===true){return}h.log("Attempting to connect to '"+y+"' using longPolling.");t.pollXhr=a.ajax({url:y,global:false,cache:false,type:"GET",dataType:h.ajaxDataType,contentType:h.contentType,xhrFields:{withCredentials:h.withCredentials},success:function(B){var A=0,z;o=0;if(p!==null){j()}i();if(B){z=f.maximizePersistentResponse(B)}f.processMessages(t,B);if(z&&a.type(z.LongPollDelay)==="number"){A=z.LongPollDelay}if(z&&z.Disconnect){return}if(d(t)===true){return}if(A>0){g.setTimeout(function(){r(t,false)},A)}else{r(t,false)}},error:function(z,A){g.clearTimeout(p);p=null;if(A==="abort"){h.log("Aborted xhr requst.");return}o++;if(h.state!==e.connectionState.reconnecting){h.log("An error occurred using longPolling. Status = "+A+". "+z.responseText);a(t).triggerHandler(c.onError,[z.responseText])}f.ensureReconnectingState(t);q.init(t,function(){r(t,true)})}});if(x&&w===true){p=g.setTimeout(function(){j(t)},Math.min(1000*(Math.pow(2,o)-1),l))}}(h));g.setTimeout(function(){i()},250)},250)})},lostConnection:function(h){throw new Error("Lost Connection not handled for LongPolling")},send:function(h,i){f.ajaxSend(h,i)},stop:function(h){if(h.pollXhr){h.pollXhr.abort();h.pollXhr=null;delete h.pollXhr}},abort:function(i,h){f.ajaxAbort(i,h)}}}(window.jQuery,window));(function(a,k){var b=0,c={},d=".hubProxy";function i(l){return l+d}function j(l,m,q){var n,o=l.length,p=[];for(n=0;n<o;n+=1){if(l.hasOwnProperty(n)){p[n]=m.call(q,l[n],n,l)}}return p}function e(l){return a.isFunction(l)?null:(a.type(l)==="undefined"?null:l)}function f(m){for(var l in m){if(m.hasOwnProperty(l)){return true}}return false}function h(l,m){return new h.fn.init(l,m)}h.fn=h.prototype={init:function(l,m){this.state={};this.connection=l;this.hubName=m;this._={callbackMap:{}}},hasSubscriptions:function(){return f(this._.callbackMap)},on:function(n,l){var o=this,m=o._.callbackMap;n=n.toLowerCase();if(!m[n]){m[n]={}}m[n][l]=function(q,p){l.apply(o,p)};a(o).bind(i(n),m[n][l]);return o},off:function(o,l){var p=this,m=p._.callbackMap,n;o=o.toLowerCase();n=m[o];if(n){if(n[l]){a(p).unbind(i(o),n[l]);delete n[l];if(!f(n)){delete m[o]}}else{if(!l){a(p).unbind(i(o));delete m[o]}}}return p},invoke:function(q){var r=this,l=a.makeArray(arguments).slice(1),m=j(l,e),p={H:r.hubName,M:q,A:m,I:b},o=a.Deferred(),n=function(s){var t=r._maximizeHubResponse(s);a.extend(r.state,t.State);if(t.Error){if(t.StackTrace){r.connection.log(t.Error+"\n"+t.StackTrace)}o.rejectWith(r,[t.Error])}else{o.resolveWith(r,[t.Result])}};c[b.toString()]={scope:r,method:n};b+=1;if(!a.isEmptyObject(r.state)){p.S=r.state}r.connection.send(k.JSON.stringify(p));return o.promise()},_maximizeHubResponse:function(l){return{State:l.S,Result:l.R,Id:l.I,Error:l.E,StackTrace:l.T}}};h.fn.init.prototype=h.fn;function g(n,l){var m={qs:null,logging:false,useDefaultPath:true};a.extend(m,l);if(!n||m.useDefaultPath){n=(n||"")+"/signalr"}return new g.fn.init(n,m)}g.fn=g.prototype=a.connection();g.fn.init=function(o,m){var n={qs:null,logging:false,useDefaultPath:true},l=this;a.extend(n,m);a.signalR.fn.init.call(l,o,n.qs,n.logging);l.proxies={};l.received(function(u){var q,v,r,p,t,s;if(!u){return}if(typeof(u.I)!=="undefined"){r=u.I.toString();p=c[r];if(p){c[r]=null;delete c[r];p.method.call(p.scope,u)}}else{q=this._maximizeClientHubInvocation(u);l.log("Triggering client hub event '"+q.Method+"' on hub '"+q.Hub+"'.");t=q.Hub.toLowerCase();s=q.Method.toLowerCase();v=this.proxies[t];a.extend(v.state,q.State);a(v).triggerHandler(i(s),[q.Args])}})};g.fn._maximizeClientHubInvocation=function(l){return{Hub:l.H,Method:l.M,Args:l.A,State:l.S}};g.fn._registerSubscribedHubs=function(){if(!this._subscribedToHubs){this._subscribedToHubs=true;this.starting(function(){var l=[];a.each(this.proxies,function(m){if(this.hasSubscriptions()){l.push({name:m})}});this.data=k.JSON.stringify(l)})}};g.fn.createHubProxy=function(l){l=l.toLowerCase();var m=this.proxies[l];if(!m){m=h(this,l);this.proxies[l]=m}this._registerSubscribedHubs();return m};g.fn.init.prototype=g.fn;a.hubConnection=g}(window.jQuery,window));(function(a){a.signalR.version="1.1.2"}(window.jQuery));