(function(){var h=CodeMirror.Pos;function a(p,q){return p.line-q.line||p.ch-q.ch}var f="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD";var e=f+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040";var o=new RegExp("<(/?)(["+f+"]["+e+"]*)","g");function d(q,r,p,s){this.line=r;this.ch=p;this.cm=q;this.text=q.getLine(r);this.min=s?s.from:q.firstLine();this.max=s?s.to-1:q.lastLine()}function j(q,p){var r=q.cm.getTokenTypeAt(h(q.line,p));return r&&/\btag\b/.test(r)}function g(p){if(p.line>=p.max){return}p.ch=0;p.text=p.cm.getLine(++p.line);return true}function i(p){if(p.line<=p.min){return}p.text=p.cm.getLine(--p.line);p.ch=p.text.length;return true}function m(q){for(;;){var p=q.text.indexOf(">",q.ch);if(p==-1){if(g(q)){continue}else{return}}if(!j(q,p+1)){q.ch=p+1;continue}var r=q.text.lastIndexOf("/",p);var s=r>-1&&!/\S/.test(q.text.slice(r+1,p));q.ch=p+1;return s?"selfClose":"regular"}}function n(p){for(;;){var q=p.ch?p.text.lastIndexOf("<",p.ch-1):-1;if(q==-1){if(i(p)){continue}else{return}}if(!j(p,q+1)){p.ch=q;continue}o.lastIndex=q;p.ch=q;var r=o.exec(p.text);if(r&&r.index==q){return r}}}function k(q){for(;;){o.lastIndex=q.ch;var p=o.exec(q.text);if(!p){if(g(q)){continue}else{return}}if(!j(q,p.index+1)){q.ch=p.index+1;continue}q.ch=p.index+p[0].length;return p}}function l(q){for(;;){var p=q.ch?q.text.lastIndexOf(">",q.ch-1):-1;if(p==-1){if(i(q)){continue}else{return}}if(!j(q,p+1)){q.ch=p;continue}var r=q.text.lastIndexOf("/",p);var s=r>-1&&!/\S/.test(q.text.slice(r+1,p));q.ch=p+1;return s?"selfClose":"regular"}}function b(r,w){var t=[];for(;;){var s=k(r),p,v=r.line,u=r.ch-(s?s[0].length:0);if(!s||!(p=m(r))){return}if(p=="selfClose"){continue}if(s[1]){for(var q=t.length-1;q>=0;--q){if(t[q]==s[2]){t.length=q;break}}if(q<0&&(!w||w==s[2])){return{tag:s[2],from:h(v,u),to:h(r.line,r.ch)}}}else{t.push(s[2])}}}function c(s,w){var u=[];for(;;){var t=l(s);if(!t){return}if(t=="selfClose"){n(s);continue}var q=s.line,p=s.ch;var v=n(s);if(!v){return}if(v[1]){u.push(v[2])}else{for(var r=u.length-1;r>=0;--r){if(u[r]==v[2]){u.length=r;break}}if(r<0&&(!w||w==v[2])){return{tag:v[2],from:h(s.line,s.ch),to:h(q,p)}}}}}CodeMirror.registerHelper("fold","xml",function(q,u){var s=new d(q,u.line,0);for(;;){var t=k(s),r;if(!t||s.line!=u.line||!(r=m(s))){return}if(!t[1]&&r!="selfClose"){var u=h(s.line,s.ch);var p=b(s,t[2]);return p&&{from:u,to:p.from}}}});CodeMirror.tagRangeFinder=CodeMirror.fold.xml;CodeMirror.findMatchingTag=function(p,t,u){var s=new d(p,t.line,t.ch,u);if(s.text.indexOf(">")==-1&&s.text.indexOf("<")==-1){return}var q=m(s),w=q&&h(s.line,s.ch);var v=q&&n(s);if(!q||q=="selfClose"||!v||a(s,t)>0){return}var r={from:h(s.line,s.ch),to:w,tag:v[2]};if(v[1]){return{open:c(s,v[2]),close:r,at:"close"}}else{s=new d(p,w.line,w.ch,u);return{open:r,close:b(s,v[2]),at:"open"}}};CodeMirror.findEnclosingTag=function(q,u,v){var s=new d(q,u.line,u.ch,v);for(;;){var t=c(s);if(!t){break}var r=new d(q,u.line,u.ch,v);var p=b(r,t.tag);if(p){return{open:t,close:p}}}}})();