define(function(f){var h=f("modules/core/wizard-viewmodels");f("kendo");f("css!../workspace-operations/wizard-dialog.css");var b=h.ConfigRepoWizardViewModel.extend({events:{ERROR_SET_REMOTE:"setRemoteFail"},init:function(i,k){var j=this;h.ConfigRepoWizardViewModel.fn.init.apply(j,arguments)}});var e=h.BasePageConfigRepoViewModel.extend({isConnectVisible:true,validGitUrl:true,currentlyConnectedProvider:"None",events:{ERROR_SET_REMOTE:"setRemoteFail",VERSION_CONTROL_SELECT_PAGE:"versionControlSelectPage",VERSION_CONTROL_VALIDATE_GITURL:"versionControlValidateGitURL",VERSION_CONTROL_REMOVE_REMOTE_REPO:"versionControlRemoveRemoteRepo"},init:function(i,j){var k=this;h.BasePageConfigRepoViewModel.fn.init.apply(k,arguments);k.bind("bind",$.proxy(k.onBind,k));if(j){k.remoteRepoUrl=j;k.updateUI()}},onBind:function(){var i=this;i.validator=$("#gitUrlWrap").kendoValidator({rules:{isValidGitUrl:function(){return i.validGitUrl}},messages:{isValidGitUrl:"Enter a valid git url."},validateOnBlur:false}).data("kendoValidator")},onSet:function(){var j=this,i=j.get("remoteRepoUrl");j._validateUrl(i)},_validateUrl:function(i){var j=this;j.parentView.trigger(j.events.VERSION_CONTROL_VALIDATE_GITURL,{remoteRepoUrl:i,viewModel:j})},onRemove:function(){var j=this,i="";j.clearItemName();j.parentView.trigger(j.events.VERSION_CONTROL_REMOVE_REMOTE_REPO,{remoteRepoUrl:i,viewModel:j});j.updateUI()},clearItemName:function(){var i=this;i.set("remoteRepoUrl","")},updateUI:function(){var i=this;i.updateButtonsVisibility();i.updateCurrentlyConnectedProvider()},updateButtonsVisibility:function(){var j=this,i=j.get("remoteRepoUrl");if(i===""){j.set("isConnectVisible",true)}else{j.set("isConnectVisible",false)}},updateCurrentlyConnectedProvider:function(){var j=this,i=j.get("remoteRepoUrl");if(i===""){j.set("currentlyConnectedProvider","None")}else{if(i.indexOf("github.com")>-1){j.set("currentlyConnectedProvider","GitHub")}else{if(i.indexOf("bitbucket.org")>-1){j.set("currentlyConnectedProvider","BitBucket")}else{j.set("currentlyConnectedProvider","Unknown")}}}}});var a=h.BasePageConfigRepoViewModel.extend({storeCredentials:false,validCredentials:false,init:function(){var i=this;h.BasePageConfigRepoViewModel.fn.init.apply(i,arguments);i.bind("bind",$.proxy(i.onBind,i))},onBind:function(){var i=this;i.validator=$("#loginWrap").kendoValidator({rules:{isValidCredentials:function(){return i.validCredentials}},messages:{isValidCredentials:"Invalid Credentials."},validateOnBlur:false}).data("kendoValidator")},onValidateCredentials:function(){var i=this;i._isValidCredentials()},_isValidCredentials:function(){var l=this,m=l.get("usernameLogin"),j=l.get("passwordLogin"),k=l.get("storeCredentials"),i=btoa([m,j].join(":"));l.parentView.trigger(l.events.VERSION_CONTROL_VALIDATE_CREDENTIALS,{provider:l.provider,credentials:i,viewModel:l,storeCredentials:k})},clearUserName:function(){var i=this;i.set("usernameLogin","")},clearPassword:function(){var i=this;i.set("passwordLogin","")}});var c=a.extend({provider:"github",events:{VERSION_CONTROL_VALIDATE_CREDENTIALS:"versionControlValidateCredentialsGitHub"},init:function(){var i=this;a.fn.init.apply(i,arguments);i.bind("bind",$.proxy(i.onBind,i))}});var d=h.BasePageConfigRepoViewModel.extend({providerName:"github",gitRepoListLoading:false,isPrivateChecked:false,events:{VERSION_CONTROL_SELECT_PAGE:"versionControlSelectPage",VERSION_CONTROL_SET_REMOTE_REPO:"versionControlSetRemoteRepo",VERSION_CONTROL_CREATE_REPO:"versionControlCreateRepo"},init:function(i){var j=this;j.parentView=i;h.BasePageConfigRepoViewModel.fn.init.apply(j,arguments)},selectRepo:function(i){var j=this;if(i){j.remoteRepoUrl=i.cloneUrl;j.inviteCollaboratorsUrl=i.inviteCollaboratorsUrl;j.set("repoUrl",i.cloneUrl);j.set("inviteCollaboratorsUrl",i.inviteCollaboratorsUrl)}},setRemoteRepo:function(){var i=this;if(i.remoteRepoUrl){i.parentView.trigger(i.events.VERSION_CONTROL_SET_REMOTE_REPO,{remoteRepoUrl:i.remoteRepoUrl,inviteCollaboratorsUrl:i.inviteCollaboratorsUrl})}},onCreateAndConnect:function(){var l=this,j=l.get("repoName"),i=l.get("repoDescription"),k=l.isPrivateChecked;l.parentView.trigger(l.events.VERSION_CONTROL_CREATE_REPO,{repoName:j,repoDescription:i,repoPrivate:k})},onSelectRepo:function(i){var k=this,l=i.sender.select().data().uid,j=l?i.sender.dataSource.getByUid(l):null;k.selectRepo(j)}});var g=h.BasePageConfigRepoViewModel.extend({isConnectedInvisible:false,isDisconnectedInvisible:true,inviteCollaboratorsUrl:"",init:function(j,i){var k=this;k.parentView=j;k.inviteCollaboratorsUrl=i.inviteCollaboratorsUrl;h.BasePageConfigRepoViewModel.fn.init.apply(k,arguments)}});return{ConfigureRemoteRepoViewModel:b,IndexPageViewModel:e,GitHubAuthViewModel:c,GitHubViewModel:d,SuccessViewModel:g}});