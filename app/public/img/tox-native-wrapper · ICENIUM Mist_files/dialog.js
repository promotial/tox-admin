(function(){function a(c,e,b){var f=c.getWrapperElement();var d;d=f.appendChild(document.createElement("div"));if(b){d.className="CodeMirror-dialog CodeMirror-dialog-bottom"}else{d.className="CodeMirror-dialog CodeMirror-dialog-top"}d.innerHTML=e;return d}CodeMirror.defineExtension("openDialog",function(j,c,i){var f=a(this,j,i&&i.bottom);var e=false,h=this;function d(){if(e){return}e=true;f.parentNode.removeChild(f)}var g=f.getElementsByTagName("input")[0],b;if(g){CodeMirror.on(g,"keydown",function(k){if(i&&i.onKeyDown&&i.onKeyDown(k,g.value,d)){return}if(k.keyCode==13||k.keyCode==27){CodeMirror.e_stop(k);d();h.focus();if(k.keyCode==13){c(g.value)}}});if(i&&i.onKeyUp){CodeMirror.on(g,"keyup",function(k){i.onKeyUp(k,g.value,d)})}if(i&&i.value){g.value=i.value}g.focus();CodeMirror.on(g,"blur",d)}else{if(b=f.getElementsByTagName("button")[0]){CodeMirror.on(b,"click",function(){d();h.focus()});b.focus();CodeMirror.on(b,"blur",d)}}return d});CodeMirror.defineExtension("openConfirm",function(n,f,m){var j=a(this,n,m&&m.bottom);var e=j.getElementsByTagName("button");var h=false,l=this,d=1;function g(){if(h){return}h=true;j.parentNode.removeChild(j);l.focus()}e[0].focus();for(var k=0;k<e.length;++k){var c=e[k];(function(b){CodeMirror.on(c,"click",function(i){CodeMirror.e_preventDefault(i);g();if(b){b(l)}})})(f[k]);CodeMirror.on(c,"blur",function(){--d;setTimeout(function(){if(d<=0){g()}},200)});CodeMirror.on(c,"focus",function(){++d})}})})();