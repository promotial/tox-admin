(function(){function a(c,j,i){var d=i&&(i.call?i:i.rangeFinder);if(!d){d=c.getHelper(j,"fold")}if(!d){return}if(typeof j=="number"){j=CodeMirror.Pos(j,0)}var f=i&&i.minFoldSize||0;function e(l){var o=d(c,j);if(!o||o.to.line-o.from.line<f){return null}var n=c.findMarksAt(o.from);for(var m=0;m<n.length;++m){if(n[m].__isFold){if(!l){return null}o.cleared=true;n[m].clear()}}return o}var k=e(true);if(i&&i.scanUp){while(!k&&j.line>c.firstLine()){j=CodeMirror.Pos(j.line-1,0);k=e(false)}}if(!k||k.cleared){return}var h=b(i);CodeMirror.on(h,"mousedown",function(){g.clear()});var g=c.markText(k.from,k.to,{replacedWith:h,clearOnEnter:true,__isFold:true});g.on("clear",function(l,m){CodeMirror.signal(c,"unfold",c,l,m)});CodeMirror.signal(c,"fold",c,k.from,k.to)}function b(c){var e=(c&&c.widget)||"\u2194";if(typeof e=="string"){var d=document.createTextNode(e);e=document.createElement("span");e.appendChild(d);e.className="CodeMirror-foldmarker"}return e}CodeMirror.newFoldFunction=function(c,d){return function(e,f){a(e,f,{rangeFinder:c,widget:d})}};CodeMirror.defineExtension("foldCode",function(d,c){a(this,d,c)});CodeMirror.registerHelper("fold","combine",function(){var c=Array.prototype.slice.call(arguments,0);return function(d,g){for(var f=0;f<c.length;++f){var e=c[f](d,g);if(e){return e}}}})})();