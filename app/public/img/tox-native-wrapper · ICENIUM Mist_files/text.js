define(function(){var e=/:(\d+)\//;function b(h,f,g){$.get(h,function(i){f(i)}).error(function(){g(new Error("fetchText() failed. status: "))})}function d(g,f){return g.lastIndexOf(".")<=g.lastIndexOf("/")?g+"."+f:g}function a(f){if(console){console.error?console.error(f):console.log(f.message)}}function c(g){var f={34:'\\"',13:"\\r",12:"\\f",10:"\\n",9:"\\t",8:"\\b"};return g.replace(/(["\n\f\t\r\b])/g,function(h){return f[h.charCodeAt(0)]})}return{load:function(k,j,f,h){var g=f.resolve||f,i=f.reject||a;b(j.toUrl(k),g,i)},build:function(i,g,f){return function h(l,n,m){var p,j,o,k;p=m.toUrl(d(n,"html"));j=m.toAbsMid(n);if(!(j in built)){built[j]=true;o=c(g(p));k='define("'+l+"!"+j+'", function () {\n\treturn "'+o+'";\n});\n';i(k)}}}}});