define(function(h){var k,c=h("modules/core/core-module"),a=h("modules/core/base-classes"),l=h("modules/view-pane/view-pane-renderer-base"),j=h("modules/view-pane/view-pane-adapter"),g=h("text!./html-view-controls-render-template.html"),i={code:0,designer:1,split:2},f={horizontal:"vertical",vertical:"horizontal"};h("css!./html-view-controls-render.css");var b=window;var d=a.ViewModelBase.extend({EVENT_SPLIT_CHANGE:"splitOrientationChange",mode:i.code,orientationMode:f.vertical,init:function(){var m=this;a.ViewModelBase.fn.init.apply(m,[m]);m.bind("bind",$.proxy(m.onBind,m))},onBind:function(m){var n=this;n._$renderView=m.view;n._$splitView=$(".split-view-dual",n._$renderView);n._$designPane=n._$splitPane0=$(".split-pane:eq(0)",n._$renderView);n._$codePane=n._$splitPane1=$(".split-pane:eq(1)",n._$renderView);n._createSplitter();n._splitter.collapse(n._$designPane)},_createSplitter:function(){var m=this;m._$splitPane0.attr("style","");m._$splitPane1.attr("style","");$(".k-splitbar",m._$splitView).remove();m._splitter=m._$splitView.kendoSplitter({orientation:m.get("orientationMode"),panes:[{size:"50%",collapsible:true,scrollable:false},{size:"50%",collapsible:true,scrollable:false}],expand:$.proxy(m.onExpand,m),resize:$.proxy(m.onResize,m)}).data("kendoSplitter")},onExpand:function(m){this.set("mode",i.split)},onResize:function(m){var n=this;n.trigger(n.EVENT_SPLIT_CHANGE,{orientationMode:n.get("orientationMode")})},onCodeOnlyClick:function(){var n=this,m=n.get("mode");n.set("mode",i.code);n._splitter.expand(n._$codePane);n._splitter.collapse(n._$designPane);n._splitter.size(n._$codePane,"50%");n.trigger(n.EVENT_SPLIT_CHANGE,{orientationMode:n.get("orientationMode"),fromMode:m,toMode:n.get("mode")})},onDesignerOnlyClick:function(){var n=this,m=n.get("mode");n.set("mode",i.designer);n._splitter.expand(n._$designPane);n._splitter.collapse(n._$codePane);n._splitter.size(n._$designPane,"50%");n.trigger(n.EVENT_SPLIT_CHANGE,{orientationMode:n.get("orientationMode"),fromMode:m,toMode:n.get("mode")})},onSplitModeClick:function(){var n=this,m=n.get("mode");n.set("mode",i.split);n._splitter.expand(n._$codePane);n._splitter.expand(n._$designPane);n.trigger(n.EVENT_SPLIT_CHANGE,{orientationMode:n.get("orientationMode"),fromMode:m,toMode:n.get("mode")})},onSetHorizontalClick:function(){var m=this;m.set("orientationMode",f.horizontal);m._splitter.destroy();m._createSplitter();m.trigger(m.EVENT_SPLIT_CHANGE,{orientationMode:m.get("orientationMode")})},onSetVerticalClick:function(){var m=this;m.set("orientationMode",f.vertical);m._splitter.destroy();m._createSplitter();m.trigger(m.EVENT_SPLIT_CHANGE,{orientationMode:m.get("orientationMode")})},onSwapPanesClick:function(){var m=this;m._splitter.destroy();$(".k-splitbar",m._$splitView).remove();if(m._$designPane===m._$splitPane0){m._$splitPane1=m._$designPane;m._$splitPane0=m._$codePane;m._$codePane.prependTo(m._$splitView)}else{m._$splitPane0=m._$designPane;m._$splitPane1=m._$codePane;m._$codePane.appendTo(m._$splitView)}m._createSplitter();m.trigger(m.EVENT_SPLIT_CHANGE,{orientationMode:m.get("orientationMode")})},appendGuestPane:function(m){var n=this;m.appendTo(n._$splitPane1)},isCodeMode:function(){return this.get("mode")===i.code},isDesignerMode:function(){return this.get("mode")===i.designer},isSplitMode:function(){return this.get("mode")===i.split},isHorizontalMode:function(){return this.get("orientationMode")===f.horizontal},isVerticalMode:function(){return this.get("orientationMode")===f.vertical},resize:function(){var m=this;if(!m.isDesignerMode()){m._splitter.expand(m._$codePane)}}});var e={INITIAL_MODE:"h-split",_config:null,init:function(){var m=this;l.fn.init.apply(m,arguments)},appendToElement:function(){var m=this;l.fn.appendToElement.apply(m,arguments);m._viewModel=new d();m._$element=c.viewRenderer.renderInside(g,m._viewModel,m._$container);m._viewModel.bind(m._viewModel.EVENT_SPLIT_CHANGE,$.proxy(m.onViewChange,m))},onViewChange:function(m){var n=this;n.trigger(n.EVENT_CHANGE,m)},loadViewItem:function(m){var n=this;l.fn.loadViewItem.apply(n,arguments);n._config=m;n._viewModel.appendGuestPane(n._config.editor._$element);n._viewModel.resize()},supress:function(){var m=this;if(m._config){m._config.editor._$element.appendTo(m._$container);m._config=null}l.fn.supress.apply(m,arguments)},SPLIT_MODES:i};if($.browser.webkit===true&&$.browser.chrome===true){k=l.extend(e);j.registerViewRender(b.VIEW_PANE_RENDER_SPLIT_VIEW_CONTROLS,new k())}});