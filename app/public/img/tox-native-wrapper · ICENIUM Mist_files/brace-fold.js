CodeMirror.registerHelper("fold","brace",function(a,o){var j=o.line,k=a.getLine(j);var p,s;function f(u){for(var i=o.ch,v=0;;){var t=i<=0?-1:k.lastIndexOf(u,i-1);if(t==-1){if(v==1){break}v=1;i=k.length;continue}if(v==1&&t<o.ch){break}s=a.getTokenTypeAt(CodeMirror.Pos(j,t+1));if(!/^(comment|string)/.test(s)){return t+1}i=t-1}}var q="{",e="}",p=f("{");if(p==null){q="[",e="]";p=f("[")}if(p==null){return}var b=1,h=a.lastLine(),c,d;outer:for(var g=j;g<=h;++g){var r=a.getLine(g),n=g==j?p:0;for(;;){var m=r.indexOf(q,n),l=r.indexOf(e,n);if(m<0){m=r.length}if(l<0){l=r.length}n=Math.min(m,l);if(n==r.length){break}if(a.getTokenTypeAt(CodeMirror.Pos(g,n+1))==s){if(n==m){++b}else{if(!--b){c=g;d=n;break outer}}}++n}}if(c==null||j==c&&d==p){return}return{from:CodeMirror.Pos(j,p),to:CodeMirror.Pos(c,d)}});CodeMirror.braceRangeFinder=CodeMirror.fold.brace;CodeMirror.registerHelper("fold","import",function(a,g){function d(k){if(k<a.firstLine()||k>a.lastLine()){return null}var m=a.getTokenAt(CodeMirror.Pos(k,1));if(!/\S/.test(m.string)){m=a.getTokenAt(CodeMirror.Pos(k,m.end+1))}if(m.type!="keyword"||m.string!="import"){return null}for(var j=k,h=Math.min(a.lastLine(),k+10);j<=h;++j){var n=a.getLine(j),l=n.indexOf(";");if(l!=-1){return{startCh:m.end,end:CodeMirror.Pos(j,l)}}}}var g=g.line,c=d(g),f;if(!c||d(g-1)||((f=d(g-2))&&f.end.line==g-1)){return null}for(var b=c.end;;){var e=d(b.line+1);if(e==null){break}b=e.end}return{from:a.clipPos(CodeMirror.Pos(g,c.startCh+1)),to:b}});CodeMirror.importRangeFinder=CodeMirror.fold["import"];CodeMirror.registerHelper("fold","include",function(a,f){function d(g){if(g<a.firstLine()||g>a.lastLine()){return null}var h=a.getTokenAt(CodeMirror.Pos(g,1));if(!/\S/.test(h.string)){h=a.getTokenAt(CodeMirror.Pos(g,h.end+1))}if(h.type=="meta"&&h.string.slice(0,8)=="#include"){return h.start+8}}var f=f.line,c=d(f);if(c==null||d(f-1)!=null){return null}for(var b=f;;){var e=d(b+1);if(e==null){break}++b}return{from:CodeMirror.Pos(f,c+1),to:a.clipPos(CodeMirror.Pos(b))}});CodeMirror.includeRangeFinder=CodeMirror.fold.include;