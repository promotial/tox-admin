define(function(e){var m,f,i,g,d=e("kendo"),a=e("modules/core/base-classes"),c=e("modules/core/core-module"),k=e("text!./sidebar-nav-template.html"),o=e("text!./sidebar-template.html"),q=e("modules/workspace/solution-frame-service");var b=window;e("css!./sidebar.css");var p=a.ViewModelBase.extend({init:function(){var r=this;r.placeHolder=null;r.currentItem=null;r.paneListHolder=null;a.ViewModelBase.fn.init.apply(r,[r]);r.bind("bind",$.proxy(r.onBind,r))},onBind:function(r){var s=this;s.placeHolder=r.view;s.paneListHolder=$(".pane-container",s.placeHolder)},addItem:function(s){var u=this,w=$("<div>").hide(),v=s.viewModel,t=d.observable({name:s.name,iconClass:s.iconClass}),r={wrapper:w,viewModel:v};c.viewRenderer.render(s.template,v,w);u.paneListHolder.append(w);u.trigger(b.SIDEBAR_PANE_ADDED,{itemMetadata:r,paneItem:t})}});var l=a.ViewModelBase.extend({init:function(){var r=this;r.placeHolder=null;r.items=new d.data.ObservableArray([]);r.itemMetaHashByUid={};r.currentItem=null;g.bind(b.AFTER_SIDEBAR_PANE_ADDED,$.proxy(r.onPaneAdded,r));a.ViewModelBase.fn.init.apply(r,[r]);r.bind("bind",$.proxy(r.onBind,r))},onBind:function(r){var s=this;s.placeHolder=r.view;s.sidebar=$(".nav-list",s.placeHolder).data("kendoListView")},onPaneAdded:function(s){var t=this,r=t.items;r.push(s.paneItem);t.itemMetaHashByUid[r[r.length-1].uid]=s.itemMetadata;t.sidebar.select(t.sidebar.element.children().first());t.toggleSidebarPane(true)},onButtonStripClick:function(r){var w=this,u=w.items,x=r.sender.select().data().uid,t=w.itemMetaHashByUid[x];for(var s=0,v=u.length;s<v;s++){if(u[s].uid===x){if(w.currentItem&&w.currentItem!==u[s]){w.itemMetaHashByUid[w.currentItem.uid].wrapper.hide();w.toggleSidebarPane(true)}else{if(w.currentItem&&w.currentItem===u[s]){w.toggleSidebarPane()}}w.currentItem=u[s];t.wrapper.show();t.viewModel.trigger("activate");break}}},toggleSidebarPane:function(r){var t=this,s=q.getMainRowSplitter();if(r){s.toggle(m,r)}else{s.toggle(m)}}});var j=c.RegionAdapterBase.extend({init:function(){var r=this;c.RegionAdapterBase.fn.init.apply(this,arguments);r.viewModel=new l()},attachToElement:function(r){var s=this;c.viewRenderer.renderInside(k,s.viewModel,r)},addItem:function(r){},getItemByText:function(r){}});var n=c.RegionAdapterBase.extend({init:function(){var r=this;c.RegionAdapterBase.fn.init.apply(this,arguments);r.viewModel=new p()},attachToElement:function(r){var s=this;c.viewRenderer.renderInside(o,s.viewModel,r);m=r},addItem:function(r){var s=this;s.viewModel.addItem(r)},getItemByText:function(r){}});var h=d.Observable.extend({init:function(){var r=this;d.Observable.fn.init.apply(r,arguments)},attachEvents:function(s,r){var t=this;s.bind(b.SIDEBAR_PANE_ADDED,$.proxy(t.onSidebarPaneAdded,t))},onSidebarPaneAdded:function(r){var s=this;s.trigger(b.AFTER_SIDEBAR_PANE_ADDED,r)}});g=new h();f=new n();i=new j();g.attachEvents(f.viewModel,i.viewModel);c.frameService.registerRegionAdapter(b.BOTTOM_REGION,new c.TabStripRegionAdapter());c.frameService.registerRegionAdapter(b.SIDEBAR_REGION,f);c.frameService.registerRegionAdapter(b.SIDEBAR_NAV_REGION,i);q.loadSplitters();return g});