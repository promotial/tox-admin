(function(a){if(typeof exports=="object"&&typeof module=="object"){return a(exports,require("./acorn"))}if(typeof define=="function"&&define.amd){return define(["exports","./acorn"],a)}a(this.acorn||(this.acorn={}),this.acorn)})(function(m,a){var am=a.tokTypes;var F,r,n,f;m.parse_dammit=function(an,ao){if(!ao){ao={}}r=String(an);F=ao;if(!ao.tabSize){ao.tabSize=4}n=a.tokenize(an,ao);ah=F.sourceFile||null;f=[];C=0;b.length=0;B();return aa()};var v,ak={start:0,end:0},b=[];var i,C,h,w,ah;function B(){v=ak.end;if(F.locations){w=ak.endLoc}if(b.length){ak=b.shift()}else{ak=ae()}if(ak.start>=C){while(ak.start>=C){i=C;C=x(i)+1}h=q(i)}}function ae(){for(;;){try{return n()}catch(ao){if(!(ao instanceof SyntaxError)){throw ao}var ap=ao.message,aq=ao.raisedAt,at=true;if(/unterminated/i.test(ap)){aq=x(ao.pos);if(/string/.test(ap)){at={start:ao.pos,end:aq,type:am.string,value:r.slice(ao.pos+1,aq)}}else{if(/regular expr/i.test(ap)){var ar=r.slice(ao.pos,aq);try{ar=new RegExp(ar)}catch(ao){}at={start:ao.pos,end:aq,type:am.regexp,value:ar}}else{at=false}}}else{if(/invalid (unicode|regexp|number)|expecting unicode|octal literal|is reserved|directly after number/i.test(ap)){while(aq<r.length&&!u(r.charCodeAt(aq))){++aq}}else{if(/character escape|expected hexadecimal/i.test(ap)){while(aq<r.length){var an=r.charCodeAt(aq++);if(an===34||an===39||t(an)){break}}}else{if(/unexpected character/i.test(ap)){aq++;at=false}else{throw ao}}}}af(aq);if(at===true){at={start:aq,end:aq,type:am.name,value:"?"}}if(at){if(F.locations){at.startLoc=a.getLineInfo(r,at.start);at.endLoc=a.getLineInfo(r,at.end)}return at}}}}function af(ao){var an=r.charAt(ao-1);var ap=!an||/[\[\{\(,;:?\/*=+\-~!|&%^<>]/.test(an)||/[enwfd]/.test(an)&&/\b(keywords|case|else|return|throw|new|in|(instance|type)of|delete|void)$/.test(r.slice(ao-10,ao));n.jumpTo(ao,ap)}function g(ao){var an={start:ao.start,end:ao.end,type:ao.type,value:ao.value};if(F.locations){an.startLoc=ao.startLoc;an.endLoc=ao.endLoc}return an}function z(an){if(!b.length){ak=g(ak)}while(an>b.length){b.push(g(ae()))}return b[an-1]}var A=/[\n\r\u2028\u2029]/;function t(an){return an===10||an===13||an===8232||an===8329}function u(an){return(an<14&&an>8)||an===32||an===160||t(an)}function ad(){f.push(h)}function ac(){h=f.pop()}function x(an){while(an<r.length&&!t(r.charCodeAt(an))){++an}return an}function y(an){while(an>0&&!t(r.charCodeAt(an-1))){--an}return an}function q(ap){for(var ao=0;;++ap){var an=r.charCodeAt(ap);if(an===32){++ao}else{if(an===9){ao+=F.tabSize}else{return ao}}}}function e(ao,ap,aq,an){if(ak.type===ao||ak.type===am.eof){return true}if(aq!=i&&h<ap&&al()&&(!an||C>=r.length||q(C)<ap)){return true}return false}function al(){for(var ao=ak.start-1;ao>=i;--ao){var an=r.charCodeAt(ao);if(an!==9&&an!==32){return false}}return true}function E(an){this.type=null;this.start=an;this.end=null}function D(an){this.start=an||ak.startLoc||{line:1,column:0};this.end=null;if(ah!==null){this.source=ah}}function ai(){var an=new E(ak.start);if(F.locations){an.loc=new D()}return an}function aj(ao){var an=new E(ao.start);if(F.locations){an.loc=new D(ao.loc.start)}return an}function o(an,ao){an.type=ao;an.end=v;if(F.locations){an.loc.end=w}return an}function p(){if(F.locations){var an=new D();an.end=an.start;return an}}function j(){var an=new E(ak.start);an.type="Identifier";an.end=ak.start;an.name="?";an.loc=p();return an}function s(an){return an.name=="?"}function k(an){if(ak.type===an){B();return true}}function c(){return(ak.type===am.eof||ak.type===am.braceR||A.test(r.slice(v,ak.start)))}function ag(){k(am.semi)}function l(an){if(k(an)){return true}if(z(1).type==an){B();B();return true}if(z(2).type==an){B();B();B();return true}}function d(an){if(an.type==="Identifier"||an.type==="MemberExpression"){return an}return j()}function aa(){var an=ai();an.body=[];while(ak.type!==am.eof){an.body.push(Y())}return o(an,"Program")}function Y(){var ay=ak.type,ax=ai();switch(ay){case am._break:case am._continue:B();var at=ay===am._break;ax.label=ak.type===am.name?Q():null;ag();return o(ax,at?"BreakStatement":"ContinueStatement");case am._debugger:B();ag();return o(ax,"DebuggerStatement");case am._do:B();ax.body=Y();ax.test=k(am._while)?W():j();ag();return o(ax,"DoWhileStatement");case am._for:B();ad();l(am.parenL);if(ak.type===am.semi){return N(ax,null)}if(ak.type===am._var){var ar=ai();B();ab(ar,true);if(ar.declarations.length===1&&k(am._in)){return O(ax,ar)}return N(ax,ar)}var ar=I(false,true);if(k(am._in)){return O(ax,d(ar))}return N(ax,ar);case am._function:B();return P(ax,true);case am._if:B();ax.test=W();ax.consequent=Y();ax.alternate=k(am._else)?Y():null;return o(ax,"IfStatement");case am._return:B();if(k(am.semi)||c()){ax.argument=null}else{ax.argument=I();ag()}return o(ax,"ReturnStatement");case am._switch:var an=h,av=i;B();ax.discriminant=W();ax.cases=[];ad();l(am.braceL);for(var ap;!e(am.braceR,an,av,true);){if(ak.type===am._case||ak.type===am._default){var au=ak.type===am._case;if(ap){o(ap,"SwitchCase")}ax.cases.push(ap=ai());ap.consequent=[];B();if(au){ap.test=I()}else{ap.test=null}l(am.colon)}else{if(!ap){ax.cases.push(ap=ai());ap.consequent=[];ap.test=null}ap.consequent.push(Y())}}if(ap){o(ap,"SwitchCase")}ac();k(am.braceR);return o(ax,"SwitchStatement");case am._throw:B();ax.argument=I();ag();return o(ax,"ThrowStatement");case am._try:B();ax.block=G();ax.handler=null;if(ak.type===am._catch){var ao=ai();B();l(am.parenL);ao.param=Q();l(am.parenR);ao.guard=null;ao.body=G();ax.handler=o(ao,"CatchClause")}ax.finalizer=k(am._finally)?G():null;if(!ax.handler&&!ax.finalizer){return ax.block}return o(ax,"TryStatement");case am._var:B();ax=ab(ax);ag();return ax;case am._while:B();ax.test=W();ax.body=Y();return o(ax,"WhileStatement");case am._with:B();ax.object=W();ax.body=Y();return o(ax,"WithStatement");case am.braceL:return G();case am.semi:B();return o(ax,"EmptyStatement");default:var aw=ak.value,aq=I();if(s(aq)){B();if(ak.type===am.eof){return o(ax,"EmptyStatement")}return Y()}else{if(ay===am.name&&aq.type==="Identifier"&&k(am.colon)){ax.body=Y();ax.label=aq;return o(ax,"LabeledStatement")}else{ax.expression=aq;ag();return o(ax,"ExpressionStatement")}}}}function G(){var ap=ai();ad();l(am.braceL);var an=h,ao=i;ap.body=[];while(!e(am.braceR,an,ao,true)){ap.body.push(Y())}ac();k(am.braceR);return o(ap,"BlockStatement")}function N(ao,an){ao.init=an;ao.test=ao.update=null;if(k(am.semi)&&ak.type!==am.semi){ao.test=I()}if(k(am.semi)&&ak.type!==am.parenR){ao.update=I()}ac();l(am.parenR);ao.body=Y();return o(ao,"ForStatement")}function O(ao,an){ao.left=an;ao.right=I();ac();l(am.parenR);ao.body=Y();return o(ao,"ForInStatement")}function ab(ao,ap){ao.declarations=[];ao.kind="var";while(ak.type===am.name){var an=ai();an.id=Q();an.init=k(am.eq)?I(true,ap):null;ao.declarations.push(o(an,"VariableDeclarator"));if(!k(am.comma)){break}}return o(ao,"VariableDeclaration")}function I(ao,aq){var an=R(aq);if(!ao&&ak.type===am.comma){var ap=aj(an);ap.expressions=[an];while(k(am.comma)){ap.expressions.push(R(aq))}return o(ap,"SequenceExpression")}return an}function W(){ad();l(am.parenL);var an=I();ac();l(am.parenR);return an}function R(ap){var an=S(ap);if(ak.type.isAssign){var ao=aj(an);ao.operator=ak.value;ao.left=d(an);B();ao.right=R(ap);return o(ao,"AssignmentExpression")}return an}function S(ap){var an=L(ap);if(k(am.question)){var ao=aj(an);ao.test=an;ao.consequent=I(true);ao.alternate=l(am.colon)?I(true,ap):j();return o(ao,"ConditionalExpression")}return an}function L(ap){var an=h,ao=i;return K(T(ap),-1,ap,an,ao)}function K(ao,aq,at,an,ap){if(i!=ap&&h<an&&al()){return ao}var au=ak.type.binop;if(au!=null&&(!at||ak.type!==am._in)){if(au>aq){var ar=aj(ao);ar.left=ao;ar.operator=ak.value;B();if(i!=ap&&h<an&&al()){ar.right=j()}else{ar.right=K(T(at),au,at,an,ap)}var ar=o(ar,/&&|\|\|/.test(ar.operator)?"LogicalExpression":"BinaryExpression");return K(ar,aq,at,an,ap)}}return ao}function T(ap){if(ak.type.prefix){var ao=ai(),aq=ak.type.isUpdate;ao.operator=ak.value;ao.prefix=true;B();ao.argument=T(ap);if(aq){ao.argument=d(ao.argument)}return o(ao,aq?"UpdateExpression":"UnaryExpression")}var an=M();while(ak.type.postfix&&!c()){var ao=aj(an);ao.operator=ak.value;ao.prefix=false;ao.argument=d(an);B();an=o(ao,"UpdateExpression")}return an}function M(){var an=h,ao=i;return Z(H(),false,h,ao)}function Z(an,ap,ar,ao){for(;;){if(i!=ao&&h<=ar&&al()){if(ak.type==am.dot&&h==ar){--ar}else{return an}}if(k(am.dot)){var aq=aj(an);aq.object=an;if(i!=ao&&h<=ar&&al()){aq.property=j()}else{aq.property=X()||j()}aq.computed=false;an=o(aq,"MemberExpression")}else{if(ak.type==am.bracketL){ad();B();var aq=aj(an);aq.object=an;aq.property=I();aq.computed=true;ac();l(am.bracketR);an=o(aq,"MemberExpression")}else{if(!ap&&ak.type==am.parenL){ad();var aq=aj(an);aq.callee=an;aq.arguments=J(am.parenR);an=o(aq,"CallExpression")}else{return an}}}}}function H(){switch(ak.type){case am._this:var an=ai();B();return o(an,"ThisExpression");case am.name:return Q();case am.num:case am.string:case am.regexp:var an=ai();an.value=ak.value;an.raw=r.slice(ak.start,ak.end);B();return o(an,"Literal");case am._null:case am._true:case am._false:var an=ai();an.value=ak.type.atomValue;an.raw=ak.type.keyword;B();return o(an,"Literal");case am.parenL:var ao=ak.start;B();var ap=I();ap.start=ao;ap.end=ak.end;l(am.parenR);return ap;case am.bracketL:var an=ai();ad();an.elements=J(am.bracketR);return o(an,"ArrayExpression");case am.braceL:return V();case am._function:var an=ai();B();return P(an,false);case am._new:return U();default:return j()}}function U(){var ao=ai(),ap=h,an=i;B();ao.callee=Z(H(),true,ap,an);if(ak.type==am.parenL){ad();ao.arguments=J(am.parenR)}else{ao.arguments=[]}return o(ao,"NewExpression")}function V(){var ar=ai();ar.properties=[];ad();B();var au=h,ap=i;while(!e(am.braceR,au,ap)){var aq=X();if(!aq){if(s(I(true))){B()}k(am.comma);continue}var at={key:aq},an=false,ao;if(k(am.colon)){at.value=I(true);ao=at.kind="init"}else{if(F.ecmaVersion>=5&&at.key.type==="Identifier"&&(at.key.name==="get"||at.key.name==="set")){an=true;ao=at.kind=at.key.name;at.key=X()||j();at.value=P(ai(),false)}else{B();k(am.comma);continue}}ar.properties.push(at);k(am.comma)}ac();k(am.braceR);return o(ar,"ObjectExpression")}function X(){if(ak.type===am.num||ak.type===am.string){return H()}if(ak.type===am.name||ak.type.keyword){return Q()}}function Q(){var an=ai();an.name=ak.type===am.name?ak.value:ak.type.keyword;B();return o(an,"Identifier")}function P(ao,an){if(ak.type===am.name){ao.id=Q()}else{if(an){ao.id=j()}else{ao.id=null}}ao.params=[];ad();l(am.parenL);while(ak.type==am.name){ao.params.push(Q());k(am.comma)}ac();k(am.parenR);ao.body=G();return o(ao,an?"FunctionDeclaration":"FunctionExpression")}function J(an){var ar=h,at=i,aq=[],ao=C;B();while(!e(an,ar+(i<=ao?1:0),at)){var ap=I(true);if(s(ap)){if(e(an,ar,at)){break}B()}else{aq.push(ap)}while(k(am.comma)){}}ac();k(an);return aq}});