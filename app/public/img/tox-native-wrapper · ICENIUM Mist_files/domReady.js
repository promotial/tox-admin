(function(g,e){var m="readyState",n={loaded:1,interactive:1,complete:1},b=[],f=typeof e[m]!="string",d=false,k=10,a,o,p=[],j,r;function l(){d=true;clearTimeout(j);while(o=p.pop()){o()}if(f){e[m]="complete"}var s;while((s=b.shift())){s()}}var q;function h(){if(!e.body){return false}if(!q){q=e.createTextNode("")}try{e.body.removeChild(e.body.appendChild(q));q=r;return true}catch(s){return false}}function c(s){var t;t=n[e[m]]&&h();if(!d&&t){l()}return t}function i(){c();if(!d){j=setTimeout(i,k)}}if("addEventListener" in g){a=function(t,s){t.addEventListener(s,c,false);return function(){t.removeEventListener(s,c,false)}}}else{a=function(t,s){t.attachEvent("on"+s,c);return function(){t.detachEvent(s,c)}}}if(e){if(!c()){p=[a(g,"load"),a(e,"readystatechange"),a(g,"DOMContentLoaded")];j=setTimeout(i,k)}}define(function(){function s(t){if(d){t()}else{b.push(t)}}s.then=s;s.amd=true;return s})}(this,document));